<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-06-27T16:21:41.781725"><title>Chapitre 6 : Le Versioning d'API - G&eacute;rer le Temps et l'&Eacute;volution | Help Instance</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-le-contrat-de-confiance","level":0,"title":"Introduction : Le Contrat de Confiance","anchor":"#introduction-le-contrat-de-confiance"},{"id":"qu-est-ce-qu-un-breaking-change","level":0,"title":"Qu\u0027est-ce qu\u0027un \"Breaking Change\" ?","anchor":"#qu-est-ce-qu-un-breaking-change"},{"id":"strat-gies-de-versioning","level":0,"title":"Stratégies de Versioning","anchor":"#strat-gies-de-versioning"},{"id":"impl-menter-le-versioning-par-uri-dans-spring-boot","level":0,"title":"Implémenter le Versioning par URI dans Spring Boot","anchor":"#impl-menter-le-versioning-par-uri-dans-spring-boot"},{"id":"exercice-13-mettre-en-place-le-versioning","level":0,"title":"Exercice 13 : Mettre en place le Versioning","anchor":"#exercice-13-mettre-en-place-le-versioning"},{"id":"correction-exercice-13","level":0,"title":"Correction exercice 13","anchor":"#correction-exercice-13"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion","level":0,"title":"Conclusion","anchor":"#conclusion"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Chapitre 6 : Le Versioning d'API - G&eacute;rer le Temps et l'&Eacute;volution | Help Instance"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Help Instance Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/005-03-api-versionning.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Chapitre 6 : Le Versioning d'API - G&eacute;rer le Temps et l'&Eacute;volution | Help Instance"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/005-03-api-versionning.html#webpage",
    "url": "writerside-documentation/005-03-api-versionning.html",
    "name": "Chapitre 6 : Le Versioning d'API - G&eacute;rer le Temps et l'&Eacute;volution | Help Instance",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Help Instance Help"
}</script><!-- End Schema.org --></head><body data-id="005-03-api-versionning" data-main-title="Chapitre 6 : Le Versioning d'API - Gérer le Temps et l'Évolution" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="004-00-advanced-rest-patterns.md|Chapitre 6 : Patterns REST Avancés - L'Essentiel"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Help Instance  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="005-03-api-versionning" id="005-03-api-versionning.md">Chapitre 6 : Le Versioning d'API - Gérer le Temps et l'Évolution</h1><p id="nvxg06_3">Notre API est maintenant performante et &eacute;l&eacute;gante. Mais une API, comme tout logiciel, est destin&eacute;e &agrave; vivre et &agrave; &eacute;voluer. Demain, une nouvelle r&eacute;glementation pourrait nous imposer de changer le format d'une donn&eacute;e, ou une nouvelle id&eacute;e pourrait nous amener &agrave; restructurer compl&egrave;tement la fa&ccedil;on dont on g&egrave;re les pr&ecirc;ts de livres. Comment introduire ces changements sans briser les applications de tous nos clients qui d&eacute;pendent de la version actuelle ? La r&eacute;ponse est une pratique professionnelle essentielle : le <span class="control" id="nvxg06_13">versioning</span>.</p><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="nvxg06_14">&Agrave; la fin de cette partie, vous serez capable de :</p><ul class="list _bullet" id="nvxg06_15"><li class="list__item" id="nvxg06_16"><p id="nvxg06_21">Expliquer pourquoi le versioning d'API est crucial pour la maintenance &agrave; long terme.</p></li><li class="list__item" id="nvxg06_17"><p id="nvxg06_22">Distinguer un changement non-cassant (&quot;non-breaking&quot;) d'un changement cassant (&quot;breaking change&quot;).</p></li><li class="list__item" id="nvxg06_18"><p id="nvxg06_23">Identifier les diff&eacute;rentes strat&eacute;gies de versioning et leurs avantages/inconv&eacute;nients.</p></li><li class="list__item" id="nvxg06_19"><p id="nvxg06_24">Mettre en &oelig;uvre la strat&eacute;gie de versioning la plus courante (par URI) dans une application Spring Boot.</p></li><li class="list__item" id="nvxg06_20"><p id="nvxg06_25">Comprendre comment g&eacute;rer la coexistence de plusieurs versions d'une API.</p></li></ul></section><section class="chapter"><h2 id="introduction-le-contrat-de-confiance" data-toc="introduction-le-contrat-de-confiance">Introduction : Le Contrat de Confiance</h2><p id="nvxg06_26">Imaginez que votre API est un <span class="control" id="nvxg06_29">contrat de service</span> que vous signez avec les d&eacute;veloppeurs qui l'utilisent. Ce contrat stipule que si un client envoie une requ&ecirc;te <code class="code" id="nvxg06_30">GET /api/books/{id}</code>, il recevra un objet JSON avec un champ <code class="code" id="nvxg06_31">isbn</code> qui est une cha&icirc;ne de caract&egrave;res.</p><p id="nvxg06_27">Maintenant, que se passe-t-il si vous d&eacute;cidez unilat&eacute;ralement que le champ <code class="code" id="nvxg06_32">isbn</code> doit maintenant s'appeler <code class="code" id="nvxg06_33">internationalStandardBookNumber</code>? Toutes les applications clientes qui lisaient le champ <code class="code" id="nvxg06_34">isbn</code> cesseront de fonctionner instantan&eacute;ment. Vous avez rompu le contrat.</p><p id="nvxg06_28">Le versioning est la solution &eacute;l&eacute;gante &agrave; ce probl&egrave;me. Il vous permet de dire : &quot;Le contrat <span class="control" id="nvxg06_35">V1</span> est toujours en vigueur et ne changera pas. Mais pour ceux qui le souhaitent, je propose un nouveau contrat, la <span class="control" id="nvxg06_36">V2</span>, avec des termes mis &agrave; jour.&quot; C'est le fondement de la stabilit&eacute; et de l'&eacute;volution contr&ocirc;l&eacute;e.</p></section><section class="chapter"><h2 id="qu-est-ce-qu-un-breaking-change" data-toc="qu-est-ce-qu-un-breaking-change">Qu'est-ce qu'un &quot;Breaking Change&quot; ?</h2><p id="nvxg06_37">La premi&egrave;re &eacute;tape est de savoir quand une nouvelle version est n&eacute;cessaire. On ne cr&eacute;e une nouvelle version que pour les <span class="control" id="nvxg06_39">changements cassants (breaking changes)</span>.</p><ul class="list _bullet" id="nvxg06_38"><li class="list__item" id="nvxg06_40"><p id="nvxg06_42"><span class="control" id="nvxg06_44">Breaking Changes (n&eacute;cessitent une nouvelle version - V2)</span></p><ul class="list _bullet" id="nvxg06_43"><li class="list__item" id="nvxg06_45"><p id="nvxg06_51">Supprimer un champ d'une r&eacute;ponse JSON (<code class="code" id="nvxg06_52">isbn</code> dispara&icirc;t).</p></li><li class="list__item" id="nvxg06_46"><p id="nvxg06_53">Renommer un champ (<code class="code" id="nvxg06_54">isbn</code> devient <code class="code" id="nvxg06_55">isbn13</code>).</p></li><li class="list__item" id="nvxg06_47"><p id="nvxg06_56">Changer le type de donn&eacute;es d'un champ (l'ISBN devient un objet au lieu d'une cha&icirc;ne).</p></li><li class="list__item" id="nvxg06_48"><p id="nvxg06_57">Ajouter un champ obligatoire dans une requ&ecirc;te <code class="code" id="nvxg06_58">POST</code>/<code class="code" id="nvxg06_59">PUT</code>.</p></li><li class="list__item" id="nvxg06_49"><p id="nvxg06_60">Supprimer un endpoint.</p></li><li class="list__item" id="nvxg06_50"><p id="nvxg06_61">Changer l'URL d'un endpoint.</p></li></ul></li><li class="list__item" id="nvxg06_41"><p id="nvxg06_62"><span class="control" id="nvxg06_64">Non-Breaking Changes (peuvent &ecirc;tre faits sur la version actuelle - V1)</span></p><ul class="list _bullet" id="nvxg06_63"><li class="list__item" id="nvxg06_65"><p id="nvxg06_69">Ajouter un nouveau champ optionnel dans une r&eacute;ponse JSON.</p></li><li class="list__item" id="nvxg06_66"><p id="nvxg06_70">Ajouter un nouvel endpoint.</p></li><li class="list__item" id="nvxg06_67"><p id="nvxg06_71">Ajouter un nouveau param&egrave;tre de requ&ecirc;te optionnel.</p></li><li class="list__item" id="nvxg06_68"><p id="nvxg06_72">Modifier le contenu d'un message d'erreur.</p></li></ul></li></ul></section><section class="chapter"><h2 id="strat-gies-de-versioning" data-toc="strat-gies-de-versioning">Strat&eacute;gies de Versioning</h2><p id="nvxg06_73">Il existe plusieurs mani&egrave;res d'indiquer la version d'une API.</p><ol class="list _decimal" id="nvxg06_74" type="1"><li class="list__item" id="nvxg06_76"><p id="nvxg06_79"><span class="control" id="nvxg06_81">Dans l'URI (la plus populaire)</span>: C'est la m&eacute;thode la plus claire et la plus explicite.</p><ul class="list _bullet" id="nvxg06_80"><li class="list__item" id="nvxg06_82"><p id="nvxg06_86"><code class="code" id="nvxg06_87">GET /api/v1/books</code></p></li><li class="list__item" id="nvxg06_83"><p id="nvxg06_88"><code class="code" id="nvxg06_89">GET /api/v2/books</code></p></li><li class="list__item" id="nvxg06_84"><p id="nvxg06_90"><span class="control" id="nvxg06_91">Avantages :</span> Tr&egrave;s visible, facile &agrave; tester dans un navigateur, facile &agrave; mettre en cache.</p></li><li class="list__item" id="nvxg06_85"><p id="nvxg06_92"><span class="control" id="nvxg06_93">Inconv&eacute;nient :</span> Certains puristes estiment que l'URI ne devrait pas changer car la ressource (le livre) reste la m&ecirc;me.</p></li></ul></li><li class="list__item" id="nvxg06_77"><p id="nvxg06_94"><span class="control" id="nvxg06_96">Via un en-t&ecirc;te HTTP personnalis&eacute; (Header)</span>: Techniquement plus &quot;pur&quot;.</p><ul class="list _bullet" id="nvxg06_95"><li class="list__item" id="nvxg06_97"><p id="nvxg06_100"><code class="code" id="nvxg06_101">GET /api/books</code> avec l'en-t&ecirc;te <code class="code" id="nvxg06_102">Accept: application/vnd.bibliotech.v1+json</code></p></li><li class="list__item" id="nvxg06_98"><p id="nvxg06_103"><span class="control" id="nvxg06_104">Avantages :</span> L'URI reste propre et stable.</p></li><li class="list__item" id="nvxg06_99"><p id="nvxg06_105"><span class="control" id="nvxg06_106">Inconv&eacute;nients :</span> Moins visible, plus complexe &agrave; tester, n&eacute;cessite une configuration c&ocirc;t&eacute; client.</p></li></ul></li><li class="list__item" id="nvxg06_78"><p id="nvxg06_107"><span class="control" id="nvxg06_109">Via un param&egrave;tre de requ&ecirc;te (Query Param)</span>: Moins courant.</p><ul class="list _bullet" id="nvxg06_108"><li class="list__item" id="nvxg06_110"><p id="nvxg06_112"><code class="code" id="nvxg06_113">GET /api/books?version=1</code></p></li><li class="list__item" id="nvxg06_111"><p id="nvxg06_114"><span class="control" id="nvxg06_115">Inconv&eacute;nients :</span> Encombre les URIs, peut poser des probl&egrave;mes de cache.</p></li></ul></li></ol><p id="nvxg06_75">Pour sa clart&eacute; et sa popularit&eacute;, nous allons nous concentrer sur la <span class="control" id="nvxg06_116">strat&eacute;gie de versioning par URI</span>.</p></section><section class="chapter"><h2 id="impl-menter-le-versioning-par-uri-dans-spring-boot" data-toc="impl-menter-le-versioning-par-uri-dans-spring-boot">Impl&eacute;menter le Versioning par URI dans Spring Boot</h2><p id="nvxg06_117">C'est d'une simplicit&eacute; remarquable. Il suffit de modifier l'annotation <code class="code" id="nvxg06_123">@RequestMapping</code> de nos contr&ocirc;leurs.</p><section class="procedure-steps"><h3 id="nvxg06_118" data-toc="nvxg06_118">Passage de nos contrôleurs en V1</h3><p id="nvxg06_124">Appliquons cette pratique &agrave; nos contr&ocirc;leurs existants pour les &eacute;tablir comme &eacute;tant la &quot;V1&quot; de notre API.</p><div class="code-block" data-lang="java">
// Dans BookController.java
@Tag(name = &quot;Livres&quot;, description = &quot;API V1 pour la gestion des livres&quot;)
@RestController
// On préfixe le chemin avec la version
@RequestMapping(&quot;/api/v1/books&quot;)
public class BookController {
    // Le reste du code ne change absolument pas
}
</div><div class="code-block" data-lang="java">
// Dans AuthorController.java
@Tag(name = &quot;Auteurs&quot;, description = &quot;API V1 pour la gestion des auteurs&quot;)
@RestController
@RequestMapping(&quot;/api/v1/authors&quot;) // On préfixe aussi ici
public class AuthorController {
    // Le reste du code ne change absolument pas
}
</div><p id="nvxg06_127">Voil&agrave; ! Toute notre API est maintenant officiellement en version 1.</p><ol class="list _decimal"></ol></section><p id="nvxg06_119"><span class="control" id="nvxg06_128">Comment g&eacute;rer la V2 ?</span> Le jour o&ugrave; vous aurez besoin d'introduire un &quot;breaking change&quot; sur les livres, la r&egrave;gle d'or est : <span class="control" id="nvxg06_129">NE MODIFIEZ PAS</span> le <code class="code" id="nvxg06_130">BookController</code> existant.</p><ol class="list _decimal" id="nvxg06_120" type="1"><li class="list__item" id="nvxg06_131"><p id="nvxg06_134">Cr&eacute;ez un <span class="control" id="nvxg06_135">nouveau fichier</span>, <code class="code" id="nvxg06_136">BookControllerV2.java</code>.</p></li><li class="list__item" id="nvxg06_132"><p id="nvxg06_137">Mappez-le &agrave; la nouvelle URI de version : <code class="code" id="nvxg06_138">@RequestMapping(&quot;/api/v2/books&quot;)</code>.</p></li><li class="list__item" id="nvxg06_133"><p id="nvxg06_139">Impl&eacute;mentez votre nouvelle logique dans ce contr&ocirc;leur.</p></li></ol><p id="nvxg06_121">Les deux contr&ocirc;leurs coexisteront pacifiquement. Les anciens clients continueront d'appeler la V1, tandis que les nouveaux pourront b&eacute;n&eacute;ficier des am&eacute;liorations de la V2.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="122px" preserveAspectRatio="none" style="width:1195px;height:122px;background:#FFFFFF;" version="1.1" viewBox="0 0 1195 122" width="1195px" zoomAndPan="magnify"><defs/><g><!--cluster Serveur API BiblioTech--><g id="cluster_Serveur API BiblioTech"><path d="M376,17.9922 L540,17.9922 A3.75,3.75 0 0 1 542.5,20.4922 L549.5,40.4805 L825,40.4805 A2.5,2.5 0 0 1 827.5,42.9805 L827.5,112.9822 A2.5,2.5 0 0 1 825,115.4822 L376,115.4822 A2.5,2.5 0 0 1 373.5,112.9822 L373.5,20.4922 A2.5,2.5 0 0 1 376,17.9922 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="373.5" x2="549.5" y1="40.4805" y2="40.4805"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163" x="377.5" y="33.5273">Serveur API BiblioTech</text></g><!--entity V1--><g id="elem_V1"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="390" y="52.9922"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="563" y="57.9922"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="561" y="59.9922"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="561" y="63.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="405" y="86.5273">BookControllerV1.java</text></g><!--entity V2--><g id="elem_V2"><rect fill="#F1F1F1" height="46.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="618" y="52.9922"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="791" y="57.9922"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="789" y="59.9922"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="789" y="63.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="633" y="86.5273">BookControllerV2.java</text></g><!--entity ClientV1--><g id="elem_ClientV1"><ellipse cx="81.5" cy="46.4922" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M81.5,54.4922 L81.5,81.4922 M68.5,62.4922 L94.5,62.4922 M81.5,81.4922 L68.5,96.4922 M81.5,81.4922 L94.5,96.4922 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="6" y="111.5273">Client Mobile (Ancien)</text></g><!--entity ClientV2--><g id="elem_ClientV2"><ellipse cx="1095.5" cy="46.4922" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M1095.5,54.4922 L1095.5,81.4922 M1082.5,62.4922 L1108.5,62.4922 M1095.5,81.4922 L1082.5,96.4922 M1095.5,81.4922 L1108.5,96.4922 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185" x="1003" y="111.5273">Application Web (Nouveau)</text></g><!--link ClientV1 to V1--><g id="link_ClientV1_V1"><path d="M157.2,76.2422 C222.91,76.2422 312.42,76.2422 383.68,76.2422 " fill="none" id="ClientV1-to-V1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="389.68,76.2422,380.68,72.2422,384.68,76.2422,380.68,80.2422,389.68,76.2422" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="212.5" y="34.8105">GET /api/v1/books</text><path d="M179.5,43.5527 L179.5,68.5527 L367.5,68.5527 L367.5,53.5527 L357.5,43.5527 L179.5,43.5527 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M357.5,43.5527 L357.5,53.5527 L367.5,53.5527 L357.5,43.5527 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="185.5" y="61.1211">Le contrat V1 est respect&#233;.</text></g><!--link ClientV2 to V2--><g id="link_ClientV2_V2"><path d="M1002.58,76.2422 C944.52,76.2422 875.89,76.2422 817.13,76.2422 " fill="none" id="ClientV2-to-V2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="811.13,76.2422,820.13,80.2422,816.13,76.2422,820.13,72.2422,811.13,76.2422" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="846" y="19.8105">GET /api/v2/books</text><path d="M833.5,28.5527 L833.5,68.5527 L980.5,68.5527 L980.5,38.5527 L970.5,28.5527 L833.5,28.5527 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M970.5,28.5527 L970.5,38.5527 L980.5,38.5527 L970.5,28.5527 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="839.5" y="46.1211">Le client utilise le</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="839.5" y="61.4316">nouveau contrat V2.</text></g><!--SRC=[RP11IyD048Nl-oiUETL34xB77eIqY0WgWgKUnCDaExHZbjrbiyb5_47-3l-O6uBQeiUPz-QRnoEJV4IniS8kuSwtOXcBnfayNnIW7hEqgnNDrYO4AuQIU8SdRh6uzyF8D9ovjLA1J4S7Hl78SUGXedcumLfQAtxBvbZWJG7FQ- -xZNSfUcivxkhobKPwcKZvurzTd-XQlIlrdGxBA8TZMbxcEwnmVRL5HK6giQxQZEYLyucH8rjntGgt33DHAKr-xXCYzu5D-lmeVw3w1AhFeFeVQ4uxKUSYXoHMUeRbl7PpGRyVTQdOxJ5TVm40]--></g></svg></div></section><section class="chapter"><h2 id="exercice-13-mettre-en-place-le-versioning" data-toc="exercice-13-mettre-en-place-le-versioning">Exercice 13 : Mettre en place le Versioning</h2><p id="nvxg06_140">Votre mission est de pr&eacute;parer notre API pour l'avenir en &eacute;tablissant formellement sa version 1.</p><p id="nvxg06_141"><span class="control" id="nvxg06_143">&Eacute;nonc&eacute; :</span></p><ol class="list _decimal" id="nvxg06_142" type="1"><li class="list__item" id="nvxg06_144"><p id="nvxg06_148">Modifiez les annotations <code class="code" id="nvxg06_149">@RequestMapping</code> de <code class="code" id="nvxg06_150">BookController</code> et <code class="code" id="nvxg06_151">AuthorController</code> pour qu'ils r&eacute;pondent respectivement sur <code class="code" id="nvxg06_152">/api/v1/books</code> et <code class="code" id="nvxg06_153">/api/v1/authors</code>.</p></li><li class="list__item" id="nvxg06_145"><p id="nvxg06_154">Mettez &agrave; jour les annotations <code class="code" id="nvxg06_155">@Tag</code> dans Swagger pour qu'elles mentionnent &quot;API V1&quot;, afin de rendre la version visible dans la documentation.</p></li><li class="list__item" id="nvxg06_146"><p id="nvxg06_156">Ouvrez votre fichier <code class="code" id="nvxg06_157">requests.http</code> et mettez &agrave; jour toutes les URIs pour qu'elles incluent le pr&eacute;fixe <code class="code" id="nvxg06_158">/v1</code>.</p></li><li class="list__item" id="nvxg06_147"><p id="nvxg06_159">Lancez l'application et ex&eacute;cutez une de vos requ&ecirc;tes HTTP mises &agrave; jour (par exemple, <code class="code" id="nvxg06_160">GET http://localhost:8080/api/v1/books</code>) pour v&eacute;rifier que tout fonctionne comme avant, mais sur les nouvelles URIs.</p></li></ol></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h2 id="correction-exercice-13" data-toc="correction-exercice-13">Correction exercice 13</h2></div><div class="collapse__content"><p id="nvxg06_161"><span class="control" id="nvxg06_169">1 &amp; 2. Les contr&ocirc;leurs modifi&eacute;s</span></p><p id="nvxg06_162"><code class="code" id="nvxg06_170">BookController.java</code></p><div class="code-block" data-lang="java">
//...

import io.swagger.v3.oas.annotations.tags.Tag;

@Tag(name = &quot;Livres&quot;, description = &quot;API V1 pour la gestion des livres&quot;)
@RestController
@RequestMapping(&quot;/api/v1/books&quot;)
public class BookController {
    // ...
}
</div><p id="nvxg06_164"><code class="code" id="nvxg06_171">AuthorController.java</code></p><div class="code-block" data-lang="java">
//...

import io.swagger.v3.oas.annotations.tags.Tag;

@Tag(name = &quot;Auteurs&quot;, description = &quot;API V1 pour la gestion des auteurs&quot;)
@RestController
@RequestMapping(&quot;/api/v1/authors&quot;)
public class AuthorController {
    // ...
}
</div><p id="nvxg06_166"><span class="control" id="nvxg06_172">3. Le fichier <code class="code" id="nvxg06_173">requests.http</code> mis &agrave; jour (extrait)</span></p><div class="code-block" data-lang="http">
### Récupérer tous les livres (V1)
GET http://localhost:8080/api/v1/books
Accept: application/json

### Récupérer l'auteur avec l'ID 1 (V1)
GET http://localhost:8080/api/v1/authors/1
Accept: application/json

### Créer un nouvel auteur (V1)
POST http://localhost:8080/api/v1/authors
Content-Type: application/json

{
  &quot;firstName&quot;: &quot;Jules&quot;,
  &quot;lastName&quot;: &quot;Verne&quot;
}
</div><p id="nvxg06_168"><span class="control" id="nvxg06_174">4. V&eacute;rification</span> En ex&eacute;cutant les requ&ecirc;tes, vous devriez obtenir les m&ecirc;mes r&eacute;ponses qu'auparavant. En visitant <code class="code" id="nvxg06_175">http://localhost:8080/swagger-ui.html</code>, vous verrez que les endpoints sont maintenant regroup&eacute;s sous les chemins <code class="code" id="nvxg06_176">/api/v1/...</code> et que les descriptions des tags ont &eacute;t&eacute; mises &agrave; jour.</p></div></div></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><ol class="list _decimal" id="nvxg06_177" type="1"><li class="list__item" id="nvxg06_178"><p id="nvxg06_183"><span class="control" id="nvxg06_184">(QCM)</span> Quelle est la raison principale pour versionner une API ? a) Pour rendre les URIs plus jolies. b) Pour g&eacute;rer les &quot;breaking changes&quot; sans impacter les clients existants. c) Pour am&eacute;liorer les performances. d) C'est une obligation de Spring Boot.</p></li><li class="list__item" id="nvxg06_179"><p id="nvxg06_185"><span class="control" id="nvxg06_186">_ (Question ouverte)_</span> Qu'est-ce qu'un &quot;breaking change&quot; ? Donnez un exemple concret dans le contexte de notre entit&eacute; <code class="code" id="nvxg06_187">Book</code>.</p></li><li class="list__item" id="nvxg06_180"><p id="nvxg06_188"><span class="control" id="nvxg06_189">(QCM)</span> Laquelle de ces modifications est un changement non-cassant (&quot;non-breaking&quot;) ? a) Renommer le champ <code class="code" id="nvxg06_190">title</code> en <code class="code" id="nvxg06_191">bookTitle</code> dans <code class="code" id="nvxg06_192">BookDto</code>. b) Ajouter un nouveau champ optionnel <code class="code" id="nvxg06_193">editor</code> &agrave; <code class="code" id="nvxg06_194">BookDto</code>. c) Changer le type de l'ID de <code class="code" id="nvxg06_195">Long</code> &agrave; <code class="code" id="nvxg06_196">String</code>. d) Supprimer l'endpoint <code class="code" id="nvxg06_197">GET /api/v1/books/{id}</code>.</p></li><li class="list__item" id="nvxg06_181"><p id="nvxg06_198"><span class="control" id="nvxg06_199">_ (Question ouverte)_</span> Quelle est la meilleure pratique pour introduire une V2 d'une API des livres tout en maintenant la V1 ?</p></li><li class="list__item" id="nvxg06_182"><p id="nvxg06_200"><span class="control" id="nvxg06_201">_ (Question ouverte)_</span> Citez un avantage et un inconv&eacute;nient de la strat&eacute;gie de versioning par URI.</p></li></ol></section><section class="chapter"><h2 id="conclusion" data-toc="conclusion">Conclusion</h2><p id="nvxg06_202">Vous ma&icirc;trisez maintenant l'un des aspects les plus importants de la vie d'une API : sa capacit&eacute; &agrave; &eacute;voluer dans le temps de mani&egrave;re contr&ocirc;l&eacute;e et professionnelle. Le versioning n'est pas une r&eacute;flexion apr&egrave;s coup, mais une strat&eacute;gie &agrave; mettre en place d&egrave;s le d&eacute;but d'un projet. En adoptant cette pratique, vous construisez des API fiables et durables, qui inspirent confiance &agrave; leurs utilisateurs. Vous ne livrez plus seulement du code, mais un service stable sur lequel d'autres peuvent b&acirc;tir.</p><p id="nvxg06_203">Ceci conclut notre exploration approfondie des patterns avanc&eacute;s. Vous &ecirc;tes d&eacute;sormais &eacute;quip&eacute; pour affronter la grande majorit&eacute; des d&eacute;fis que vous rencontrerez dans la conception d'API REST.</p></section><div class="last-modified">14 juin 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="005-01-hateoas.html" class="navigation-links__prev">Chapitre 6 : L'API Auto-d&eacute;couvrable avec HATEOAS - Pour aller plus loin</a><a href="005-04-secure-api.html" class="navigation-links__next">Chapitre 6 : La S&eacute;curisation par Cl&eacute; d'API - Prot&eacute;ger vos Endpoints</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>